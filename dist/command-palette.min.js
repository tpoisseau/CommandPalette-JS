var CommandPalette=function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=0;return function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.contexts={"":{}},this._id=i._sequence,this._initEvent()}return n(i,null,[{key:"_sequence",get:function(){return r++}}]),n(i,[{key:"setCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t?{}:this.contexts[t];e.forEach(function(e){return n[e.name]=e}),this.contexts[t]=n}},{key:"removeCategory",value:function(e){e&&(!e in this.contexts||delete this.contexts[e])}},{key:"addToCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.contexts[t]||(this.contexts[t]={}),this.contexts[t][e.name]=e}},{key:"_findDom",value:function(){return document.getElementById("cmd-palette-"+this._id)}},{key:"_generateCommandDOM",value:function(){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=Object.entries(this.contexts)[Symbol.iterator](); !(r=(o=c.next()).done); r=!0){var s=o.value,l=t(s,2),u=l[0],d=l[1],h=!0,f=!1,m=void 0;try{for(var v,y=Object.entries(d)[Symbol.iterator](); !(h=(v=y.next()).done); h=!0){var p=v.value,_=t(p,2),k=_[0],g=_[1];n.push(e({},g,{category:u,name:k,title:(u?u+": ":"")+k}))}}catch(e){f=!0,m=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw m}}}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n.sort(function(e,t){return e.category.localeCompare(t.category)||e.title.localeCompare(t.title)}).map(function(e,t){return'\n        <li data-category="'+e.category+'" data-name="'+e.name+'"'+(0===t?" selected":"")+'>\n          <span class="title">'+e.title+'</span>\n          <span class="description">'+e.description+"</span>\n        </li>\n      "})}},{key:"_generateDom",value:function(){var e=this;document.body.insertAdjacentHTML("afterbegin",'\n      <div id="cmd-palette-'+this._id+'" class="cmd-palette cmd-palette--hide">\n        <input type="text" placeholder="Search Command">\n        <ul>\n          '+this._generateCommandDOM().join("\n")+"\n        </ul>\n      </div>\n    ");var t=this._findDom();return t.querySelector("input").addEventListener("keyup",function(t){return e.search(t.target.value)}),t}},{key:"_findOrGenerateDom",value:function(){return this._findDom()||this._generateDom()}},{key:"show",value:function(){var e=this._findOrGenerateDom();e.classList.replace("cmd-palette--hide","cmd-palette--show"),e.querySelector("input").focus()}},{key:"hide",value:function(){this._findOrGenerateDom().classList.replace("cmd-palette--show","cmd-palette--hide")}},{key:"isShow",value:function(){return this._findOrGenerateDom().classList.contains("cmd-palette--show")}},{key:"isHide",value:function(){return this._findOrGenerateDom().classList.contains("cmd-palette--hide")}},{key:"_getSelectedDomItem",value:function(){return this._findOrGenerateDom().querySelector("li[selected]")}},{key:"next",value:function(){if(!this.isHide()){var e=this._getSelectedDomItem();if(e){for(var t=e;t.nextElementSibling&&(t=t.nextElementSibling).matches(".cmd-palette-item--hide"););e.removeAttribute("selected"),t.setAttribute("selected","selected")}}}},{key:"prev",value:function(){if(!this.isHide()){var e=this._getSelectedDomItem();if(e){for(var t=e;t.previousElementSibling&&(t=t.previousElementSibling).classList.contains("cmd-palette-item--hide"););e.removeAttribute("selected"),t.setAttribute("selected","selected")}}}},{key:"search",value:function(e){if(!this.isHide()){var t=this._findOrGenerateDom(),n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.querySelectorAll("li")));e?n.forEach(function(t){i._fuzzySearch(e,t.querySelector(".title").textContent)?t.classList.remove("cmd-palette-item--hide"):t.classList.add("cmd-palette-item--hide")}):n.forEach(function(e){return e.classList.remove("cmd-palette-item--hide")}),t.querySelector("li[selected].cmd-palette-item--hide")&&this.prev(),t.querySelector("li[selected].cmd-palette-item--hide")&&this.next()}}},{key:"dispatch",value:function(){if(!this.isHide()){var e=this._findOrGenerateDom().querySelector("li[selected]:not(.cmd-palette-item--hide)");if(e){var t=e.dataset,n=t.category,r=void 0===n?"":n,i=t.name,a=this.contexts[r];if(a){var o=a[i];o&&"function"==typeof o.action&&o.action()}}}}},{key:"_initEvent",value:function(){var e=this;this._docClickHide=function(t){t.target.matches("#cmd-palette")||t.target.closest("#cmd-palette")||e.hide()},this._docKeyPressShow=function(e){return e.ctrlKey&&e.altKey&&"p"===e.key&&palette.show()},this._docKeyPressNav=function(t){if(!palette.isHide())switch(t.key){case"ArrowDown":e.next();break;case"ArrowUp":e.prev();break;case"Enter":e.dispatch()}},document.addEventListener("click",this._docClickHide),document.addEventListener("keypress",this._docKeyPressShow),document.addEventListener("keypress",this._docKeyPressNav)}},{key:"destroy",value:function(){document.removeEventListener("click",this._docClickHide),document.removeEventListener("keypress",this._docKeyPressShow),document.removeEventListener("keypress",this._docKeyPressNav);var e=this._findDom();e.parentNode.removeChild(e)}}],[{key:"_fuzzySearch",value:function(e,t){var n=t.toLowerCase(),r=0,i=-1,a=void 0;for(e=e.toLowerCase();a=e[r++];)if(!~(i=n.indexOf(a,i+1)))return!1;return!0}}]),i}()}();
//# sourceMappingURL=command-palette.min.js.map
